# Система мониторинга госзакупок Казахстана

Автоматизированная система парсинга портала goszakup.gov.kz с распределением объявлений по менеджерам через Telegram.

## Функции

- Автоматический поиск лотов по ключевым словам
- Распределение объявлений по менеджерам согласно регионам
- Telegram-уведомления с кнопками Беру в работу/Отклонить
- Генерация отчетов в Excel
- Планировщик для автоматического парсинга
- Автоматическая синхронизация с Google Sheets для постоянного учета

## Установка

1. Создайте виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

2. Установите зависимости:

```bash
pip install -r requirements.txt
```

3. Настройте `.env` файл:

- Укажите ваш ADMIN_TELEGRAM_ID

4. Создайте базу данных:

```bash
python database/models.py
```

5. (Опционально) Настройте интеграцию с Google Sheets:

   - Следуйте инструкциям в [GOOGLE_SHEETS_SETUP.md](GOOGLE_SHEETS_SETUP.md)
   - Это позволит автоматически синхронизировать все объявления с Google Таблицей

6. Запустите бота:

```bash
python main.py
```

## Структура проекта

```
goszakup_bot/
├── bot/                # Telegram бот
│   ├── handlers.py     # Обработчики команд и кнопок
│   └── messages.py     # Шаблоны сообщений
├── database/           # База данных
│   ├── models.py       # ORM модели
│   └── crud.py         # CRUD операции
├── parsers/            # Парсеры
│   ├── goszakup.py     # GraphQL API парсер
│   └── matcher.py      # Сопоставление менеджеров
├── reports/            # Генерация отчетов
│   └── excel.py        # Excel таблицы
├── utils/              # Утилиты
│   ├── logger.py       # Логирование
│   └── scheduler.py    # Планировщик
├── config.py           # Конфигурация
├── main.py             # Главный файл запуска
└── requirements.txt    # Зависимости
```

## Использование

### Команды бота

- `/start` - Запуск бота
- `/help` - Справка
- `/report` - Скачать отчет за период
- `/stats` - Статистика

### Для менеджеров

При получении уведомления:

1. Нажмите **Беру в работу** - для работы с объявлением
2. Нажмите **Отклонить** - введите причину отказа

## Лицензия

Проект создан для внутреннего использования.
